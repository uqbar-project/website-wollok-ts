---
import InfoGallery from "../info-gallery/InfoGallery.astro";
import CommercialTool from "./commercial-tool/CommercialTool.astro";
import PedagogicalTool from "./pedagogical-tool/PedagogicalTool.astro";
import Separator from "../common/Separator.astro";
import {Image} from "astro:assets";
import srcSokoban from "../../../assets/juegoSokoban.gif";

// Get current locale
const currentLocale = Astro.currentLocale || 'es';
const isEnglish = currentLocale === 'en';

// Load translations
const translations = isEnglish 
  ? await import('../../i18n/en.json')
  : await import('../../i18n/es.json');

const t = translations.default;

// Load cards based on locale - Astro.glob requires static paths
const spanishCards = await Astro.glob("./what-is-wollok/card-*.md");
const englishCards = await Astro.glob("./what-is-wollok/en/card-*.md");
const cards = isEnglish ? englishCards : spanishCards;
---

<div class="striped">
  <div class="what-is-wollok">
    <div class="cards">
      <InfoGallery title={t["landing.whatIsWollok"]} cards={cards} />
    </div>
    <Image alt={isEnglish ? "Sokoban Game" : "Juego Sokoban"} src={srcSokoban} />
  </div>
  <PedagogicalTool />
  <Separator />
  <CommercialTool />
  <Separator />
</div>

<style>
  .what-is-wollok {
    padding: 1rem 2rem;
    display: grid;
    justify-items: center;
    align-items: center;
    grid-template-rows: 1fr;
    grid-template-columns: 3fr 2fr;
  }

  .striped *:nth-child(odd) {
    background-color: var(--sl-color-gray-6);
  }

  #separador {
    margin-top: 0;
    padding: 0;
    height: 0.3rem;
    background: --sl-color-accent;
  }

  @media(max-width: 50em) {
    .what-is-wollok {
      padding: 1rem 2rem;
      display: flex;
      justify-items: center;
      align-items: center;
      flex-direction: column;
    }

    .cards {
      padding-bottom: 1rem;
    }

    .cards a {
      color: #b15757;
      text-decoration: none;
    }
</style>
